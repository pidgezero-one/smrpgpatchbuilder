# E1636_MOLEVILLE_SWAP_SHOP_LOGIC

from smrpgpatchbuilder.datatypes.overworld_scripts.event_scripts.classes import EventScript
from smrpgpatchbuilder.datatypes.overworld_scripts.event_scripts.commands import *
from smrpgpatchbuilder.datatypes.overworld_scripts.action_scripts import *
from smrpgpatchbuilder.datatypes.overworld_scripts.action_scripts.commands import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.area_objects import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.colours import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.controller_inputs import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.coords import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.directions import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.intro_title_text import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.layers import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.palette_types import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.scenes import *
from smrpgpatchbuilder.datatypes.overworld_scripts.arguments.tutorials import *
from smrpgpatchbuilder.datatypes.overworld_scripts.action_scripts.arguments import *
from ....variables.action_script_names import *
from ....variables.battlefield_names import *
from ....variables.dialog_names import *
from ....variables.event_script_names import *
from ....variables.music_names import *
from ....variables.overworld_area_names import *
from ....variables.overworld_sfx_names import *
from ....variables.pack_names import *
from ....variables.room_names import *
from ....variables.shop_names import *
from ....variables.variable_names import *
from ....items import *
from ....packets import *

script = EventScript([
	CopyVarToVar(from_var=ACTIVE_NPC, to_var=PRIMARY_TEMP_7000),
	CopyVarToVar(from_var=PRIMARY_TEMP_7000, to_var=TEMP_70AE),
	JmpIfBitSet(MOLEVILLE_TRADE_SHOP_DIALOG, ["EVENT_1636_run_dialog_7"]),
	RunDialog(dialog_id=DI1123_MINECART_HINT, above_object=MEM_70A8, closable=False, sync=False, multiline=True, use_background=True),
	RunDialogForDuration(dialog_id=DI1208_SWAP_SHOP_ASKS_YOU_FOR_ITEMS, duration=0, sync=False),
	SetBit(MOLEVILLE_TRADE_SHOP_DIALOG),
	SetVarToConst(UNKNOWN_70B0, 0),
	RunDialog(dialog_id=DI1209_SWAP_SHOP_EXPLAINS_ITSELF, above_object=MEM_70A8, closable=False, sync=False, multiline=True, use_background=True, identifier="EVENT_1636_run_dialog_7"),
	JmpToSubroutine(["EVENT_1636_store_empty_inventory_slot_count_7000_193"]),
	JmpIfBitSet(TEMP_7043_2, ["EVENT_1636_jmp_if_bit_set_14"]),
	CopyVarToVar(from_var=UNKNOWN_70B0, to_var=PRIMARY_TEMP_7000),
	RunDialogForDuration(dialog_id=DI1211_SWAP_SHOP_POINTS, duration=0, sync=False),
	RunDialog(dialog_id=DI1220_COME_BACK_WHEN_YOU_HAVE_ITEMS, above_object=MEM_70A8, closable=True, sync=False, multiline=True, use_background=True, identifier="EVENT_1636_run_dialog_12"),
	Return(),
	JmpIfBitSet(TEMP_7042_3, ["EVENT_1636_set_bit_16"], identifier="EVENT_1636_jmp_if_bit_set_14"),
	RunDialogForDuration(dialog_id=DI1210_SWAP_SHOP_EXTENDED_EXPLANATION, duration=0, sync=False),
	SetBit(TEMP_7042_3, identifier="EVENT_1636_set_bit_16"),
	CopyVarToVar(from_var=UNKNOWN_70B0, to_var=PRIMARY_TEMP_7000, identifier="EVENT_1636_copy_var_to_var_17"),
	RunDialogForDuration(dialog_id=DI1211_SWAP_SHOP_POINTS, duration=0, sync=False),
	JmpToSubroutine(["EVENT_1636_store_empty_inventory_slot_count_7000_193"]),
	JmpIfBitClear(TEMP_7043_2, ["EVENT_1636_run_dialog_12"]),
	RunDialog(dialog_id=DI1212_SWAP_SHOP_PROMPT, above_object=MEM_70A8, closable=True, sync=False, multiline=True, use_background=True, identifier="EVENT_1636_run_dialog_21"),
	JmpIfDialogOptionBSelected(["EVENT_1636_pause_190"]),
	Pause(10),
	SetAsyncActionScript(MARIO, A0670_NOD_YES),
	JmpToSubroutine(["EVENT_1636_store_empty_inventory_slot_count_7000_193"]),
	JmpIfBitClear(TEMP_7043_2, ["EVENT_1636_run_dialog_12"]),
	JmpIfBitSet(TEMP_7042_4, ["EVENT_1636_set_var_to_const_29"]),
	RunDialog(dialog_id=DI1213_SWAP_SHOP_CONTROLS, above_object=MEM_70A8, closable=True, sync=False, multiline=True, use_background=True),
	SetVarToConst(ITEM_ID, MushroomItem, identifier="EVENT_1636_set_var_to_const_29"),
	StoreItemAt70A7QuantityTo7000(),
	JmpIfVarEqualsConst(PRIMARY_TEMP_7000, 0, ["EVENT_1636_inc_59"]),
	PlaySound(sound=SO087_CORRECT_SIGNAL, channel=6),
	RunDialog(dialog_id=DI1048_MIDAS_EXCHANGE, above_object=NPC_14, closable=False, sync=False, multiline=False, use_background=False, identifier="EVENT_1636_run_dialog_33"),
	CopyVarToVar(from_var=ITEM_ID, to_var=PRIMARY_TEMP_7000),
	Mem7000AndConst(0x000F),
	AddConstToVar(PRIMARY_TEMP_7000, 1328),
	AppendDialogAt7000ToCurrentDialog(closable=False, sync=False),
	Set7000ToTappedButton(identifier="EVENT_1636_set_7000_to_tapped_button_38"),
	JmpIf7000AnyBitsSet(bits=[5], destinations=["EVENT_1636_set_bit_70"]),
	JmpIf7000AnyBitsSet(bits=[7], destinations=["EVENT_1636_play_sound_45"]),
	JmpIf7000AnyBitsSet(bits=[3], destinations=["EVENT_1636_dec_48"]),
	JmpIf7000AnyBitsSet(bits=[2], destinations=["EVENT_1636_inc_59"]),
	Pause(1),
	Jmp(["EVENT_1636_set_7000_to_tapped_button_38"]),
	PlaySound(sound=SO002_MENU_CANCEL, channel=6, identifier="EVENT_1636_play_sound_45"),
	CloseDialog(),
	Jmp(["EVENT_1636_run_dialog_21"]),
	Dec(ITEM_ID, identifier="EVENT_1636_dec_48"),
	CopyVarToVar(from_var=ITEM_ID, to_var=PRIMARY_TEMP_7000),
	Mem7000AndConst(0x000F),
	Mem7000OrConst(0x0060),
	CopyVarToVar(from_var=PRIMARY_TEMP_7000, to_var=ITEM_ID),
	JmpIfVarNotEqualsConst(ITEM_ID, YoshiCookieItem, ["EVENT_1636_store_7000_item_quantity_to_70A7_55"]),
	Dec(ITEM_ID),
	StoreItemAt70A7QuantityTo7000(identifier="EVENT_1636_store_7000_item_quantity_to_70A7_55"),
	JmpIfVarEqualsConst(PRIMARY_TEMP_7000, 0, ["EVENT_1636_dec_48"]),
	PlaySound(sound=SO003_MENU_SCROLL, channel=6),
	Jmp(["EVENT_1636_run_dialog_33"]),
	Inc(ITEM_ID, identifier="EVENT_1636_inc_59"),
	CopyVarToVar(from_var=ITEM_ID, to_var=PRIMARY_TEMP_7000),
	Mem7000AndConst(0x000F),
	Mem7000OrConst(0x0060),
	CopyVarToVar(from_var=PRIMARY_TEMP_7000, to_var=ITEM_ID),
	JmpIfVarNotEqualsConst(ITEM_ID, YoshiCookieItem, ["EVENT_1636_store_7000_item_quantity_to_70A7_66"]),
	Inc(ITEM_ID),
	StoreItemAt70A7QuantityTo7000(identifier="EVENT_1636_store_7000_item_quantity_to_70A7_66"),
	JmpIfVarEqualsConst(PRIMARY_TEMP_7000, 0, ["EVENT_1636_inc_59"]),
	PlaySound(sound=SO003_MENU_SCROLL, channel=6),
	Jmp(["EVENT_1636_run_dialog_33"]),
	SetBit(TEMP_7042_4, identifier="EVENT_1636_set_bit_70"),
	PlaySound(sound=SO001_MENU_SELECT, channel=6),
	CloseDialog(),
	RunDialog(dialog_id=DI1214_SWAP_SHOP_AMOUNT_PROMPT, above_object=MEM_70A8, closable=False, sync=False, multiline=True, use_background=True),
	JmpIfBitSet(TEMP_7042_5, ["EVENT_1636_close_dialog_76"]),
	RunDialogForDuration(dialog_id=DI1218_SWAP_SHOP_CONTROLS, duration=0, sync=False),
	CloseDialog(identifier="EVENT_1636_close_dialog_76"),
	SetVarToConst(TEMP_7026, 1),
	StoreItemAt70A7QuantityTo7000(),
	CopyVarToVar(from_var=PRIMARY_TEMP_7000, to_var=TEMP_7028),
	PlaySound(sound=SO087_CORRECT_SIGNAL, channel=6),
	CopyVarToVar(from_var=TEMP_7026, to_var=PRIMARY_TEMP_7000, identifier="EVENT_1636_copy_var_to_var_81"),
	RunDialog(dialog_id=DI1047_MIDAS_EXCHANGE, above_object=NPC_14, closable=False, sync=False, multiline=False, use_background=False),
	Set7000ToTappedButton(identifier="EVENT_1636_set_7000_to_tapped_button_83"),
	JmpIf7000AnyBitsSet(bits=[5], destinations=["EVENT_1636_set_bit_109"]),
	JmpIf7000AnyBitsSet(bits=[7], destinations=["EVENT_1636_play_sound_90"]),
	JmpIf7000AnyBitsSet(bits=[3], destinations=["EVENT_1636_copy_var_to_var_93"]),
	JmpIf7000AnyBitsSet(bits=[2], destinations=["EVENT_1636_jmp_if_var_not_equals_const_102"]),
	Pause(1),
	Jmp(["EVENT_1636_set_7000_to_tapped_button_83"]),
	PlaySound(sound=SO002_MENU_CANCEL, channel=6, identifier="EVENT_1636_play_sound_90"),
	CloseDialog(),
	Jmp(["EVENT_1636_run_dialog_21"]),
	CopyVarToVar(from_var=TEMP_7026, to_var=PRIMARY_TEMP_7000, identifier="EVENT_1636_copy_var_to_var_93"),
	Compare7000ToVar(TEMP_7028),
	JmpIfLoadedMemoryIsNot0(["EVENT_1636_inc_99"]),
	PlaySound(sound=SO088_WRONG_SIGNAL, channel=6),
	Pause(10),
	Jmp(["EVENT_1636_set_7000_to_tapped_button_83"]),
	Inc(TEMP_7026, identifier="EVENT_1636_inc_99"),
	PlaySound(sound=SO003_MENU_SCROLL, channel=6),
	Jmp(["EVENT_1636_copy_var_to_var_81"]),
	JmpIfVarNotEqualsConst(TEMP_7026, 1, ["EVENT_1636_dec_106"], identifier="EVENT_1636_jmp_if_var_not_equals_const_102"),
	PlaySound(sound=SO088_WRONG_SIGNAL, channel=6),
	Pause(10),
	Jmp(["EVENT_1636_set_7000_to_tapped_button_83"]),
	Dec(TEMP_7026, identifier="EVENT_1636_dec_106"),
	PlaySound(sound=SO003_MENU_SCROLL, channel=6),
	Jmp(["EVENT_1636_copy_var_to_var_81"]),
	SetBit(TEMP_7042_5, identifier="EVENT_1636_set_bit_109"),
	PlaySound(sound=SO001_MENU_SELECT, channel=6),
	CloseDialog(),
	CopyVarToVar(from_var=TEMP_7026, to_var=PRIMARY_TEMP_7000),
	RunDialog(dialog_id=DI1215_SWAP_SHOP_CONFIRMED_TRADE, above_object=MEM_70A8, closable=False, sync=False, multiline=True, use_background=True),
	CopyVarToVar(from_var=ITEM_ID, to_var=PRIMARY_TEMP_7000),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 96, ["EVENT_1636_jmp_if_var_not_equals_short_118"]),
	SetVarToConst(X_COORD_1, 2),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 97, ["EVENT_1636_jmp_if_var_not_equals_short_121"], identifier="EVENT_1636_jmp_if_var_not_equals_short_118"),
	SetVarToConst(X_COORD_1, 10),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 98, ["EVENT_1636_jmp_if_var_not_equals_short_124"], identifier="EVENT_1636_jmp_if_var_not_equals_short_121"),
	SetVarToConst(X_COORD_1, 30),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 99, ["EVENT_1636_jmp_if_var_not_equals_short_127"], identifier="EVENT_1636_jmp_if_var_not_equals_short_124"),
	SetVarToConst(X_COORD_1, 4),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 100, ["EVENT_1636_jmp_if_var_not_equals_short_130"], identifier="EVENT_1636_jmp_if_var_not_equals_short_127"),
	SetVarToConst(X_COORD_1, 12),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 101, ["EVENT_1636_jmp_if_var_not_equals_short_133"], identifier="EVENT_1636_jmp_if_var_not_equals_short_130"),
	SetVarToConst(X_COORD_1, 30),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 102, ["EVENT_1636_jmp_if_var_not_equals_short_136"], identifier="EVENT_1636_jmp_if_var_not_equals_short_133"),
	SetVarToConst(X_COORD_1, 2),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 103, ["EVENT_1636_jmp_if_var_not_equals_short_139"], identifier="EVENT_1636_jmp_if_var_not_equals_short_136"),
	SetVarToConst(X_COORD_1, 2),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 104, ["EVENT_1636_jmp_if_var_not_equals_short_142"], identifier="EVENT_1636_jmp_if_var_not_equals_short_139"),
	SetVarToConst(X_COORD_1, 15),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 105, ["EVENT_1636_jmp_if_var_not_equals_short_145"], identifier="EVENT_1636_jmp_if_var_not_equals_short_142"),
	SetVarToConst(X_COORD_1, 20),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 106, ["EVENT_1636_jmp_if_var_not_equals_short_148"], identifier="EVENT_1636_jmp_if_var_not_equals_short_145"),
	SetVarToConst(X_COORD_1, 40),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 107, ["EVENT_1636_jmp_if_var_not_equals_short_151"], identifier="EVENT_1636_jmp_if_var_not_equals_short_148"),
	SetVarToConst(X_COORD_1, 50),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 108, ["EVENT_1636_jmp_if_var_not_equals_short_154"], identifier="EVENT_1636_jmp_if_var_not_equals_short_151"),
	SetVarToConst(X_COORD_1, 40),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 110, ["EVENT_1636_jmp_if_var_not_equals_short_157"], identifier="EVENT_1636_jmp_if_var_not_equals_short_154"),
	SetVarToConst(X_COORD_1, 25),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	JmpIfVarNotEqualsConst(PRIMARY_TEMP_7000, 111, ["EVENT_1636_start_loop_n_times_160"], identifier="EVENT_1636_jmp_if_var_not_equals_short_157"),
	SetVarToConst(X_COORD_1, 9),
	Jmp(["EVENT_1636_copy_var_to_var_166"]),
	StartLoopNTimes(249, identifier="EVENT_1636_start_loop_n_times_160"),
	PlaySound(sound=SO001_MENU_SELECT, channel=6),
	Pause(4),
	EndLoop(),
	CloseDialog(),
	Return(),
	CopyVarToVar(from_var=UNKNOWN_70B0, to_var=PRIMARY_TEMP_7000, identifier="EVENT_1636_copy_var_to_var_166"),
	SetObjectMemoryToVar(TEMP_7026),
	AddVarTo7000(X_COORD_1),
	Store70A7ToEquipsInventory(),
	EndLoop(),
	CopyVarToVar(from_var=PRIMARY_TEMP_7000, to_var=TEMP_702A, identifier="EVENT_1636_copy_var_to_var_171"),
	CompareVarToConst(PRIMARY_TEMP_7000, 100),
	JmpIfComparisonResultIsGreaterOrEqual(["EVENT_1636_run_dialog_177"]),
	CopyVarToVar(from_var=PRIMARY_TEMP_7000, to_var=UNKNOWN_70B0),
	RunDialog(dialog_id=DI1216_LETS_SEE, above_object=MEM_70A8, closable=False, sync=False, multiline=True, use_background=True),
	Jmp(["EVENT_1636_copy_var_to_var_17"]),
	RunDialog(dialog_id=DI1217_SWAP_SHOP_OVER_100_POINTS, above_object=MEM_70A8, closable=True, sync=False, multiline=True, use_background=True, identifier="EVENT_1636_run_dialog_177"),
	JmpIfDialogOptionBOrCSelected(['EVENT_1636_set_var_to_const_181', 'EVENT_1636_set_var_to_const_183']),
	SetVarToConst(ITEM_ID, FrightBombItem),
	Jmp(["EVENT_1636_play_sound_184"]),
	SetVarToConst(ITEM_ID, FireBombItem, identifier="EVENT_1636_set_var_to_const_181"),
	Jmp(["EVENT_1636_play_sound_184"]),
	SetVarToConst(ITEM_ID, IceBombItem, identifier="EVENT_1636_set_var_to_const_183"),
	PlaySound(sound=SO027_FOUND_AN_ITEM, channel=6, identifier="EVENT_1636_play_sound_184"),
	RunDialog(dialog_id=DI1219_RECEIVED_70A7, above_object=TOADSTOOL, closable=True, sync=False, multiline=False, use_background=False),
	AddToInventory(ITEM_ID),
	CopyVarToVar(from_var=TEMP_702A, to_var=PRIMARY_TEMP_7000),
	AddConstToVar(PRIMARY_TEMP_7000, 65436),
	Jmp(["EVENT_1636_copy_var_to_var_171"]),
	Pause(10, identifier="EVENT_1636_pause_190"),
	SetAsyncActionScript(MARIO, A0671_SHAKE_HEAD_NO),
	Return(),
	StoreEmptyItemInventorySlotCountTo7000(identifier="EVENT_1636_store_empty_inventory_slot_count_7000_193"),
	CompareVarToConst(PRIMARY_TEMP_7000, 29),
	JmpIfComparisonResultIsGreaterOrEqual(["EVENT_1636_clear_bit_206"]),
	SetVarToConst(SECONDARY_TEMP_7024, 0),
	SetVarToConst(ITEM_ID, MushroomItem),
	StartLoopNTimes(14),
	StoreItemAt70A7QuantityTo7000(),
	JmpIfVarEqualsConst(PRIMARY_TEMP_7000, 0, ["EVENT_1636_inc_202"]),
	Inc(SECONDARY_TEMP_7024),
	Inc(ITEM_ID, identifier="EVENT_1636_inc_202"),
	JmpIfVarEqualsConst(ITEM_ID, YoshiCookieItem, ["EVENT_1636_inc_202"]),
	EndLoop(),
	JmpIfVarNotEqualsConst(SECONDARY_TEMP_7024, 0, ["EVENT_1636_set_bit_208"]),
	ClearBit(TEMP_7043_2, identifier="EVENT_1636_clear_bit_206"),
	Return(),
	SetBit(TEMP_7043_2, identifier="EVENT_1636_set_bit_208"),
	Return()
])
